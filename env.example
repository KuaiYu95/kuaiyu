# ===========================================
# Yu.kuai个人博客 - 环境配置示例
# 复制此文件为 .env 并修改配置
# ===========================================
# 
# 说明：
# [通用] - 开发和生产环境都需要
# [开发] - 仅开发环境需要
# [生产] - 仅生产环境需要
# ===========================================

# ============ [通用] 数据库配置 ============
# 注意：开发和生产环境的数据库配置不同，见下方说明

# Docker Compose 使用的 MySQL 配置（生产环境使用 docker-compose.yml）
# [生产] MySQL root 密码
MYSQL_ROOT_PASSWORD=ky235124
# [生产] 数据库名称
MYSQL_DATABASE=kuaiyu_db
# [生产] MySQL 用户
MYSQL_USER=kuaiyu_user
# [生产] MySQL 用户密码
MYSQL_PASSWORD=your_db_password
# [通用] MySQL 端口
MYSQL_PORT=3306

# API 服务使用的数据库配置
# [开发] 开发环境配置（使用 docker-compose.dev.yml，本地开发时 API 连接本地 MySQL）
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=kuaiyu
DB_PASSWORD=kuaiyu123
DB_NAME=kuaiyu_db

# [生产] 生产环境配置（使用 docker-compose.yml，API 在容器内连接 MySQL 容器）
# 生产环境时，取消下面的注释并注释掉上面的开发环境配置
# DB_HOST=mysql
# DB_PORT=3306
# DB_USER=${MYSQL_USER}
# DB_PASSWORD=${MYSQL_PASSWORD}
# DB_NAME=${MYSQL_DATABASE}

# ============ [通用] API 配置 ============
# [通用] API 服务端口
API_PORT=8080
# [通用] JWT 密钥（开发和生产环境都应使用强密钥，不要使用默认值）
JWT_SECRET=your_jwt_secret_key_here
# [通用] 账单 Webhook 密钥（iPhone 快捷指令等私有调用使用）
# 一定要设置为一串足够长且随机的字符串，并且不要泄露
BILL_WEBHOOK_SECRET=your_bill_webhook_secret_here
# [开发] 开发环境建议使用 debug，[生产] 生产环境必须使用 release
GIN_MODE=release  # debug | release | test

# ============ [通用] 腾讯云 COS 配置 ============
# 文件上传功能需要配置，开发和生产环境都需要
# 必填：SecretID 和 SecretKey 可在腾讯云控制台获取
COS_SECRET_ID=your_cos_secret_id
COS_SECRET_KEY=your_cos_secret_key
# 必填：存储桶名称（不包含 .cos. 前缀）
COS_BUCKET=your_bucket_name
# 必填：存储桶地域，如 ap-guangzhou（广州）、ap-beijing（北京）等
COS_REGION=ap-guangzhou
# 可选：自定义域名，如果配置了 CDN 或自定义域名，填写完整 URL（不包含路径）
# 例如：https://cdn.example.com 或 https://your-bucket.cos.ap-guangzhou.myqcloud.com
# 如果不配置，将使用默认 COS 域名
COS_BASE_URL=
# 可选：代理 URL，如果需要通过代理访问 COS（如：http://127.0.0.1:7890 或 socks5://127.0.0.1:7891）
# 如果不配置，将尝试从环境变量 https_proxy、http_proxy、all_proxy 读取
COS_PROXY_URL=

# ============ [生产] 前台配置 ============
# 注意：这些配置在构建 Docker 镜像时使用，仅生产环境需要
# [生产] 前台服务端口（docker-compose.yml 中使用）
FRONTEND_PORT=3000
# [生产] 前台 API 地址（构建时内嵌到代码中）
# 重要：生产环境应使用相对路径 /api（通过 Nginx 代理），避免混合内容错误
# 如果使用相对路径，浏览器会自动使用当前页面的协议（HTTPS）和域名
# 也可以使用完整的 HTTPS URL，如：https://yukuai.kcat.site/api
NEXT_PUBLIC_API_URL=/api
# [生产] 前台网站地址（构建时内嵌到代码中，用于 SEO 和链接生成）
NEXT_PUBLIC_SITE_URL=https://yukuai.kcat.site

# ============ [生产] 后台配置 ============
# [生产] 后台服务端口（docker-compose.yml 中使用）
ADMIN_PORT=5173
# [生产] 后台 API 地址（构建时内嵌到代码中，使用容器内地址）
VITE_API_URL=http://api:8080

# ============ [生产] SSL 证书配置 ============
# [生产] SSL 证书路径（服务器上的绝对路径，不放在项目目录中）
# 证书目录应包含两个域名的证书文件：
#   - yukuai.kcat.site 的证书
#   - admin.kcat.site 的证书
# 默认路径：/etc/ssl/kuaiyu
SSL_CERT_PATH=/etc/ssl/kuaiyu

# ===========================================
# 配置说明
# ===========================================
# 
# 开发环境（使用 docker-compose.dev.yml）：
#   - 只需要启动 MySQL 容器
#   - API、前台、后台在本地运行（不使用 Docker）
#   - 需要配置：DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_NAME
#   - 可选配置：API_PORT, JWT_SECRET, GIN_MODE, COS_*
# 
# 生产环境（使用 docker-compose.yml）：
#   - 需要构建所有 Docker 镜像
#   - 需要配置所有变量
#   - 特别注意：
#     * NEXT_PUBLIC_* 和 VITE_API_URL 在构建时内嵌到代码中
#     * 生产环境应使用强密码和密钥
#     * SSL_CERT_PATH 必须指向有效的证书目录
# 
# ===========================================
